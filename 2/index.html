<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Fun with Filters and Frequencies</title>
  <link rel="stylesheet" href="https://eecs189.org/fa25/assets/css/style.css" />
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      line-height: 1.6;
      color: #222;
      max-width: 900px;
      margin: 40px auto;
      padding: 0 20px;
      background: #fff;
    }

    h1 {
      border-bottom: 2px solid #0066cc;
      padding-bottom: 0.3em;
      color: #004080;
    }

    h2 {
      margin-top: 2.5em;
      font-weight: bold;
      color: #003366;
    }

    p {
      margin-top: 0.5em;
    }

    img {
      max-width: 100%;
      height: auto;
      margin-top: 1em;
      display: block;
    }

    .result-image {
      display: inline-block;
      margin: 15px;
      text-align: center;
    }

    .result-image img {
      width: 250px;
      height: auto;
      border: 1px solid #ccc;
    }

    .image-caption {
      margin-top: 0.5em;
      font-size: 0.9em;
    }

    .image-grid {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
    }
  </style>
</head>
<body>

  <header>
    <h1>Fun with Filters and Frequencies</h1>
  </header>

  <main>

    <section>
      <h2>Part 1.1: Convolutions from Scratch</h2>
      <pre><code>
        # 4 for-loops
        def convolve_naive(image, kernel):
            im_height, im_width = image.shape
            k_height, k_width = kernel.shape
        
            pad_height = k_height // 2
            pad_width = k_width // 2
        
            padded = np.pad(image, ((pad_height, pad_height), (pad_width, pad_width)), mode='constant', constant_values=0)
        
            output = np.zeros_like(image)
        
            for i in range(im_height):
                for j in range(im_width):
                    result = 0
                    for x in range(k_height):
                        for y in range(k_width):
                            result += padded[i + x][j + y] * kernel[x][y]
                    output[i][j] = result
            return output
        
        # 2 for-loops (vectorized)
        def convolve_vectorized(image, kernel):
            im_height, im_width = image.shape
            k_height, k_width = kernel.shape
        
            pad_height = k_height // 2
            pad_width = k_width // 2
        
            padded = np.pad(image, ((pad_height, pad_height), (pad_width, pad_width)), mode='constant', constant_values=0)
        
            output = np.zeros_like(image)
        
            for i in range(im_height):
                for j in range(im_width):
                    region = padded[i:i + k_height, j:j + k_width]
                    output[i, j] = np.sum(region * kernel)
            return output
      </code></pre>

      <p>In this part, we test out different convolution approaches: one using 4 for-loops, one using 2 for-loops (slightly vectorized), and convolve2d from scipy. Overall, convolve2d was much faster than the naive implementations above. Convolving a box filter with an image of my friend's dog took well over a minute with the 4 for-loop implementation (~1 min 15 sec), 10 seconds with the vectorized convolution, and was nearly instantaneous with convolve2d (&lt; 1 sec). By inspection, the results also looked identical as the boundaries and edges were pretty much the same.</p>

      <div class="image-grid">
        
        <div class="result-image">
          <img src="images/Ozzie.jpg" alt="Ozzie">
          <div class="image-caption">Original Ozzie</div>
        </div>
        
        <div class="result-image">
          <img src="images/Ozzie_boxed.png" alt="Ozzie_boxed">
          <div class="image-caption">Boxed Ozzie</div>
        </div>
        
        <div class="result-image">
          <img src="images/Ozzie_Dx.png" alt="Ozzie_Dx">
          <div class="image-caption">Dx-ed Ozzie</div>
        </div>
        
        <div class="result-image">
          <img src="images/Ozzie_Dy.png" alt="Ozzie_Dy">
          <div class="image-caption">Dy-ed Ozzie</div>
        </div>
        
      </div>
    </section>

    <section>
      <h2>Part 1.2: Finite Difference Operator</h2>
      <p>In this part, we test out the finite difference operators and try to find an optimal threshold value that detects edges in our images while ideally minimizing noise. After trying out different threshold values, I decided to go with a 0.25 threshold as the image was still noisy when using a 0.2 threshold whereas at 0.3, the edges started to disconnect.</p>

      <div class="image-grid">
        
        <div class="result-image">
          <img src="images/cameraman.png" alt="Cameraman">
          <div class="image-caption">Original Cameraman</div>
        </div>
        
        <div class="result-image">
          <img src="images/Camera_Dx.jpg" alt="Cameraman_Dx">
          <div class="image-caption">Dx-ed Cameraman</div>
        </div>
        
        <div class="result-image">
          <img src="images/Camera_Dy.jpg" alt="Cameraman_Dy">
          <div class="image-caption">Dy-ed Cameraman</div>
        </div>
        
        <div class="result-image">
          <img src="images/Cameraman_mag.jpg" alt="Cameraman_mag">
          <div class="image-caption">Cameraman Gradient Magnitude</div>
        </div>
        
        <div class="result-image">
          <img src="images/Cameraman_binarize.jpg" alt="Cameraman_binarize">
          <div class="image-caption">Cameraman Gradient Binarized</div>
        </div>
        
      </div>
    </section>


    
    <section>
      <h2>Part 1.3: Derivative of Gaussian (DoG) Filter</h2>
      <p>In this part, we try a different approach to edge detection by convolving with a Gaussian filter instead of applying finite of difference operators directly, allowing us to produce much smoother edges albeit with a higher threshold value (I used a threshold of 40 here). We tried two different approaches: (1) we apply a Gaussian filter on images before taking their derivative and convolving, (2) we convolve Gaussian filters with derivatives then apply on images. Both produced the same, smoother result compared to part 1.2. A kernel size of 9 was applied on these images.</p>

      <div class="image-grid">
        
        <div class="result-image">
          <img src="images/gaus_kernel.jpg" alt="gaus_kernel">
          <div class="image-caption">Gaussian Kernel</div>
        </div>   
        
        <div class="result-image">
          <img src="images/DoG_dx.jpg" alt="DoG_dx">
          <div class="image-caption">DoG Dx</div>
        </div>

        <div class="result-image">
          <img src="images/DoG_dy.jpg" alt="DoG_dy">
          <div class="image-caption">DoG Dy</div>
        </div>


        <div class="result-image">
          <img src="images/gaus_dx.jpg" alt="gaus_dx">
          <div class="image-caption">Approach 1 Dx on Cameraman</div>
        </div>
        
        <div class="result-image">
          <img src="images/gaus_dy.jpg" alt="gaus_dy">
          <div class="image-caption">Approach 1 Dy on Cameraman</div>
        </div>
        
        <div class="result-image">
          <img src="images/gaus_mag.jpg" alt="gaus_mag">
          <div class="image-caption">Approach 1 Magnitude on Cameraman</div>
        </div>
   
        
        <div class="result-image">
          <img src="images/camera-imgx.jpg" alt="camera-imgx">
          <div class="image-caption">Approach 2 Dx on Cameraman</div>
        </div>
        
        <div class="result-image">
          <img src="images/camera-imgy.jpg" alt="camera-imgy">
          <div class="image-caption">Approach 2 Dy on Cameraman</div>
        </div>
        
        <div class="result-image">
          <img src="images/camera_conv_mag.jpg" alt="gaus_mag">
          <div class="image-caption">Approach 2 Magnitude on Cameraman</div>
        </div>

        <div class="result-image">
          <img src="images/cameraman-final.jpg" alt="cameraman-final">
          <div class="image-caption">Final Edge Image</div>
        </div>
        
        
      </div>
    </section>

    <section>
      <h2>Part 2.1: Image "Sharpening"</h2>
      <p>Next, we use a masking technique to "sharpen" an image. This is done by getting the high frequences of the image (subtracting the blurred image from the original), scaling it by some alpha value, and adding it back to our original image. I tested the technique on an image of the Taj Mahal as well as a super blurry image of Oski along with different alpha values.</p>

    <div class="image-grid">
      
        <div class="result-image">
          <img src="images/taj.jpg" alt="taj">
          <div class="image-caption">Original Taj</div>
        </div>
        
        <div class="result-image">
          <img src="images/taj-blur.jpg" alt="taj-blur">
          <div class="image-caption">Blurred Taj (Low Frequency)</div>
        </div>
        
        <div class="result-image">
          <img src="images/taj-details.jpg" alt="taj-details">
          <div class="image-caption">Taj Details (High Frequency)</div>
        </div>
  
        <div class="result-image">
          <img src="images/taj-sharpen.jpg" alt="taj-sharpen">
          <div class="image-caption">Taj Sharpened (alpha=1.5)</div>
        </div>
  
        <div class="result-image">
          <img src="images/taj-sharpen-3.jpg" alt="taj-sharpen-3">
          <div class="image-caption">Taj Sharpened (alpha=3)</div>
        </div>

    </div>
  
      
    <div class="image-grid">
      
        <div class="result-image">
          <img src="images/oski.jpg" alt="oski">
          <div class="image-caption">Original Oski</div>
        </div>
        
        <div class="result-image">
          <img src="images/oski-blur.jpg" alt="taj-blur">
          <div class="image-caption">Blurred Oski</div>
        </div>
        
        <div class="result-image">
          <img src="images/oski-details.jpg" alt="taj-details">
          <div class="image-caption">Oski Details</div>
        </div>
  
        <div class="result-image">
          <img src="images/oski-sharpen-3.jpg" alt="oski-sharpen-3">
          <div class="image-caption">Oski Sharpened (alpha=3)</div>
        </div>
  
        <div class="result-image">
          <img src="images/oski-sharpen-6.jpg" alt="oski-sharpen-6">
          <div class="image-caption">Oski Sharpened (alpha=6)</div>
        </div>
      
    </div>
      
      <p>I also tried blurring then re-sharpening a sharp image and it looked comparable to the original one, although the colors were slightly less vibrant in the sharpened version.</p>

      <div class="image-grid">

        <div class="result-image">
          <img src="images/cq.jpg" alt="cq">
          <div class="image-caption">Original Bridge</div>
        </div>
        
        <div class="result-image">
          <img src="images/cq-blur.jpg" alt="cq-blur">
          <div class="image-caption">Blurred Bridge</div>
        </div>
        
        <div class="result-image">
          <img src="images/cq-details.jpg" alt="cq-details">
          <div class="image-caption">Bridge Details</div>
        </div>
  
        <div class="result-image">
          <img src="images/cq-sharpen-3.jpg" alt="cq-sharpen-3">
          <div class="image-caption">Bridge Sharpened (alpha=3)</div>
        </div>
        
      </div>
      
      
      
    </section>


    <section>
      <h2>Part 2.2: Hybrid Images</h2>
      <p>Then in this next part, we combine the low frequencies of one image with the high frequencies of another image to get a hybrid image effect. Aside from testing it out on Derek and Nutmeg, I tried to create a hybrid between an Eiffel-looking tower and the Campanile. For the tower hybrid, I used a low-pass cutoff of 15 and high pass cutoff of 25.</p>
      
      <div class="image-grid">
        
        <div class="result-image">
          <img src="images/derek-hybrid.jpeg" alt="derek-hybrid">
          <div class="image-caption">Derek Nutmeg Hybrid</div>
        </div>
        
      </div>
      
      <div class="image-grid">
        
        <div class="result-image">
          <img src="images/tower.jpg" alt="tower">
          <div class="image-caption">Original Tower</div>
        </div>
      
        <div class="result-image">
          <img src="images/campanile.jpg" alt="campanile">
          <div class="image-caption">Original Campanile</div>
        </div>
      
        <div class="result-image">
          <img src="images/tower-hybrid.jpg" alt="tower-hybrid">
          <div class="image-caption">Tower Campanile Hybrid</div>
        </div>
      
        <div class="result-image">
          <img src="images/fourier.jpeg" alt="fourier">
          <div class="image-caption">FFTs of Tower Hybrid</div>
        </div>
        
      </div>

    </section>

    <section>
      <h2>Part 2.3: Gaussian and Laplacian Stacks</h2>
      <p>This part uses Gaussian and Laplacian stacks to prepare us for the next part where we attempt to combine two images seamlessly. Here are the stacks on the provided apple and orange images.</p>
      
      <div class="image-grid">
        <div class="result-image">
          <img src="images/apple-gaus.jpg" alt="apple-gaus">
          <div class="image-caption">Apple Gaussian Stack</div>
        </div>
        
        <div class="result-image">
          <img src="images/orange-gaus.jpg" alt="orange-gaus">
          <div class="image-caption">Orange Gaussian Stack</div>
        </div>
      
        <div class="result-image">
          <img src="images/apple-lap.jpg" alt="apple-lap">
          <div class="image-caption">Apple Laplacian Stack</div>
        </div>
      
        <div class="result-image">
          <img src="images/orange-lap.jpg" alt="orange-lap">
          <div class="image-caption">Orange Laplacian Stack</div>
        </div>
      </div>
      
    </section>

    
    <section>
      <h2>Part 2.4: Multiresolution Blending (aka. Oraple)</h2>
      <p>I did not have time to recreate the 3.42 figure specifically, but I managed to visualize the oraple result as well as some other fun blends.</p>
      <div class="image-grid">
        <div class="result-image">
          <img src="images/oraple.png" alt="oraple">
          <div class="image-caption">Oraple Result</div>
        </div>
        
        <div class="image-grid">
        <div class="result-image">
          <img src="images/sun_night_blend.png" alt="sun_night_blend">
          <div class="image-caption">Sun Night Blend</div>
        </div>
      </div>
    </section>
  </main>

</body>
</html>
